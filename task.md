Техническое задание на мобильное приложение «Водный баланс» (Flutter, локально, RuStore, freemium)
1. Общие сведения
Название: Водный баланс

Платформа: Android (выпуск через RuStore)

Технологии: Flutter (Dart), локальное хранение данных

Цель: Помочь пользователям отслеживать ежедневное потребление воды, мотивировать и удерживать привычку.

Модель монетизации: Freemium:

Бесплатная версия: ограничена (по времени триала или по функционалу)

Pro-версия: разблокировка всех функций (одноразовая покупка или подписка)

2. Основные пользовательские сценарии
Пользователь устанавливает приложение (в RuStore).

Проходит onboarding (краткое объяснение + установка суточной нормы).

Добавляет воду (быстро, через преднастройки или вручную).

Видит прогресс за день.

Получает напоминания пить воду.

Просматривает статистику.

При достижении ограничений бесплатной версии предлагается апгрейд до Pro.

Пользователь может восстановить Pro-покупку после переустановки (локально/через простую проверку, см. раздел “Про-версия”).

3. Ограничения бесплатной версии
Можно выбрать один из двух подходов или комбинировать:

Вариант A: Ограничение по времени (trial)
Бесплатное полное использование в течение N дней (например, 7 дней).

По истечении: в бесплатной версии остаются только базовые функции (например, добавление воды + просмотр текущего дня), остальные блокируются или показывают подсказку “Pro”.

Хранение даты первой активации локально с защитой от простого сброса (например, обфускация, хеш + checksum, хранение в двух местах).

Вариант B: Ограничение по функционалу
Бесплатная версия:

Установка суточной нормы.

Добавление воды вручную (ограничено, например, до 5 записей в день).

Прогресс за текущий день.

Простые локальные напоминания (фиксированные, без гибкой настройки).

Статистика только за 1 день.

Pro-версия:

Неограниченное добавление воды.

Гибкие и настраиваемые напоминания.

Расширенная статистика: дневная, недельная, месячная, средние.

Редактирование/удаление прошлых записей.

Виджет (если реализуется).

Тёмная тема/кастомизация (если считать премиум-фичей).

Экспорт/резервное копирование (локально).

Можно комбинировать: например, базовый функционал навсегда бесплатен, а расширенные функции доступны только в Pro; при этом новые пользователи получают 7-дневный trial Pro.

4. Функциональные требования
4.1 Onboarding
Краткое введение в смысл приложения.

Ввод параметров: вес (для расчёта нормы), выбор единиц (мл/л/oz).

Опционально: выбор цели (обычная, активная, низкоактивная).

Индикация trial-периода (если используется).

4.2 Главный экран
Круговой/линейный прогресс суточной нормы.

Кнопки быстрого добавления (100, 200, 300 мл и “другой объём”).

Кнопка “+” для кастомного ввода.

Отображение оставшегося до цели.

Подсказка по апгрейду, если пользователь достиг ограничений бесплатной версии.

4.3 Напоминания
Локальные push-уведомления.

Настройка интервалов (Pro) или один фиксированный режим (Free).

Возможность отложить/отключить (на время/до вечера).

4.4 Статистика
Free: только текущий день.

Pro: история (7/30/все дни), графики (линейный/столбчатый), среднее потребление, достижение цели.

4.5 Управление записями
Редактировать ранее добавленное количество.

Удалить запись.

Просмотр времени каждого приёма воды.

4.6 Настройки
Единицы измерения.

Суточная норма (автоматический расчет по весу + ручная корректировка).

Тема (светлая/тёмная).

Управление уведомлениями.

Восстановление покупки Pro.

Сброс данных (с предупреждением).

5. Архитектура и технологии
5.1 Стек
Flutter (Dart) — кроссплатформа, основная реализация UI и логики.

Локальное хранилище:

sqflite или drift (раньше Moor) для структурированных данных (записи воды, история).

shared_preferences для простых флагов (например, первый запуск, пробный период).

Локальные уведомления: пакет вроде flutter_local_notifications (реализация триггеров по времени).

Управление платёжной стороной:

Для RuStore: использовать их механизм внутриигровых/внутрипрограммных покупок (если доступен), либо интеграцию через сторонний платежный шлюз, если политика позволяет.

Альтернатива: Pro-разблокировка через одноразовый код/лицензию (сохранённый локально + проверка checksum).

Защита trial: комбинированное хранение мета-информации (например, хеш даты + привязка к устройству, скрытые поля) для усложнения простого сброса через удаление данных.

5.2 Модули
UI (главный экран, статистика, onboarding, настройки).

Хранилище (DAO/репозитории).

Напоминания (сервис планирования локальных уведомлений).

Логика бизнес-правил (вычисление нормы, триггеры апгрейда).

Покупки/разблокировка (Pro).

Менеджер trial/статуса пользователя.

6. UX/UI
Стиль: чистый, минималистичный, плавные анимации (например, при заполнении прогресс-бара).

Тема по умолчанию — светлая с акцентами голубого; тёмная тема в Pro.

Информативные microcopy: пояснения, подсказки, диалоги подтверждения/ошибок.

Подтверждение удаления/сброса.

7. Монетизация и управление Pro
7.1 Пробный период
Автоматическое включение trial (например, 7 дней) при первом запуске.

Ясное отображение оставшегося времени.

Предложение апгрейда до Pro с сохранением прогресса.

7.2 Pro-разблокировка
Одноразовая покупка (предпочтительно) — хранится локально (с возможностью восстановления).

Возможность “восстановить” при переустановке (через встроенный механизм RuStore или через сохранённый на устройстве токен).

Если подписка: автоматическое продление + уведомления о её истечении (но это сложнее без внешнего бэкенда — можно ограничиться одноразовой покупкой).

7.3 Апсейл и ограничения
Ограниченные функции в Free, мягкие “напоминания” про Pro (например, всплывающие подсказки “разблокируй Pro, чтобы увидеть статистику за месяц”).

8. Локализация
Русский как основной язык.

Возможность добавления английского (на будущее) через i18n (flutter_localizations и .arb файлы).

9. Тестирование
Юнит-тесты для логики расчета нормы и trial.

Интеграционные тесты для добавления/редактирования/удаления воды.

Тесты уведомлений.

Ручное тестирование: установка, трейл, апгрейд, восстановление Pro, сброс данных.

10. Выпуск в RuStore
Подготовка APK/AAB с подписью.

Соответствие требованиям RuStore (иконка, описания, скриншоты, политика конфиденциальности).

Обработка разрешений (уведомления и, если нужно, сохранение — ничего лишнего).

Минимальные зависимости, чтобы пройти модерацию.

11. Критерии готовности (Definition of Done)
Пользователь может добавлять и редактировать воду.

Работает расчёт нормы и отображается прогресс.

Напоминания приходят по расписанию (в рамках тарифного режима).

Статистика работает: в Free — за день, в Pro — расширенная.

Trial/ограничения корректно применяются и устойчивы к простым обходам.

Pro можно купить/восстановить.

Данные сохраняются локально и не теряются при перезапуске (если не сделан сброс).

Приложение собрано и подготовлено для публикации в RuStore (все метаданные, иконки, описание).